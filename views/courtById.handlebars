<section class="court-details">
    <h1>NYC Court Finder</h1>
    <h2>{{courtName}}</h2>
    <p>Address: {{address}}</p>
    <p>Rating: {{overallRating}}/5</p>
    <div id="map">
        <iframe
            width="600"
            height="450"
            style="border:0"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDFFwqO140DVnI3leB_luDuu3133GDLfaI
                &q={{latitude}},{{longitude}}">
        </iframe>
    </div>
    
</section>
<br>
<h2>Pick Up Games:</h2>
<p id="disclaimer">Disclaimer: The pickup games listed on this website are organized and managed entirely by the users. The developers of this website are not responsible for any events or activities that take place as a result of the information provided on this website. We provide this information solely as a service to our users, and it is up to each individual to determine whether or not to participate in any pickup games listed on this website. Any decision to participate in such games is entirely at the individual's own risk and discretion. The developers of this website assume no responsibility for any injuries, damages, or other consequences that may arise from participation in pickup games listed on this website. By using this website, you agree to these terms and conditions.
  </p>
<section>
  <button class="create-game-btn" onclick="location.href='http://localhost:3000/game/{{courtId}}'">
  <span>Create Pick-Up Game</span>
</button>
    <div id="pick-up-games">
        {{#each pickUpGames}}
  <div class="game">
    <p>Game at {{this.courtName}}</p>
    <p>Date: {{this.date}}</p>
    <p>Time: {{this.time}}</p>
    <p>Max Players: {{this.maxPlayers}}</p>
    <p>Players Joined: {{this.gameMembers.length}}</p>
    {{!-- todo players needed  --}}
    <button class="button" onclick="location.href='http://localhost:3000/game/gameDetails/{{this._id}}'">Game Details</button>
  </div>
{{/each}}
    </div>
</section>

{{!-- Section to show if the created comment is successful --}}
{{#if createComment}}
  <h5 class="successMessage">Created court comment successfully</h5>
{{/if}}

<section name="courtReviews">
    <h2>Court Reviews</h2>
       <button class="button" onclick="location.href='http://localhost:3000/game/gameDetails/{{this._id}}'">Write a review</button>
    <ul>
        {{#each reviews}}
            <li>
                <h3><a href="/user/{{this.userID}}">{{this.fullName}}</a></h1>
                <p>Rating: {{this.rating}}/5</p>
                <p>{{this.comment}}</p>
            </li>
        {{/each}}
    </ul>

    <button id="add-comment-btn">Add Comment</button>

<form id="add-comment-form" action="/courts/{{courtId}}" method="POST" style="display: none;">
  <input type="hidden" name="courtID" value="{{courtId}}">
  <input type="hidden" name="userID" value="{{userId}}">

  <label for="comment-input">Comment:</label>
  <input type="text" id="comment-input" name="comment">

  <label for="rating-input">Rating:</label>
  <input type="number" id="rating-input" name="rating" min="1" max="5">
  
  <button type="submit" id="submit-review-btn">Submit</button>
</form>

<script>

const form = document.querySelector('#add-comment-form');
const submitBtn = document.querySelector('#submit-review-btn');
const addCommentBtn = document.querySelector('#add-comment-btn');

if (form) {
  addCommentBtn.addEventListener('click', () => {
    form.style.display = 'block';
    submitBtn.style.display = 'block';
  });

  submitBtn.addEventListener('click', (event) => {
    event.preventDefault(); 
    form.submit(); 
  });
}

form.action = `/courts/${courtId}`;

</script>
